<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Course site for my civil wars class.">

<title>Civil wars - Syllabus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="html/tenso-berkeley.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Civil wars</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./assignment/index.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-this-class-about" id="toc-what-is-this-class-about" class="nav-link active" data-scroll-target="#what-is-this-class-about">What is this class about?</a></li>
  <li><a href="#what-materials-do-i-need-for-this-course" id="toc-what-materials-do-i-need-for-this-course" class="nav-link" data-scroll-target="#what-materials-do-i-need-for-this-course">What materials do I need for this course?</a>
  <ul class="collapse">
  <li><a href="#where-do-i-find-the-readings" id="toc-where-do-i-find-the-readings" class="nav-link" data-scroll-target="#where-do-i-find-the-readings">Where do I find the readings?</a></li>
  <li><a href="#what-do-i-need-for-the-data-assignments" id="toc-what-do-i-need-for-the-data-assignments" class="nav-link" data-scroll-target="#what-do-i-need-for-the-data-assignments">What do I need for the data assignments?</a></li>
  </ul></li>
  <li><a href="#how-can-i-get-help-or-contact-the-instructors" id="toc-how-can-i-get-help-or-contact-the-instructors" class="nav-link" data-scroll-target="#how-can-i-get-help-or-contact-the-instructors">How can I get help or contact the instructors?</a></li>
  <li><a href="#frequently-answered-no-questions-fanq" id="toc-frequently-answered-no-questions-fanq" class="nav-link" data-scroll-target="#frequently-answered-no-questions-fanq">Frequently Answered No Questions (FANQ)</a></li>
  <li><a href="#counseling-psychiatry-services" id="toc-counseling-psychiatry-services" class="nav-link" data-scroll-target="#counseling-psychiatry-services">Counseling &amp; Psychiatry Services</a></li>
  <li><a href="#assignments-and-grades" id="toc-assignments-and-grades" class="nav-link" data-scroll-target="#assignments-and-grades">Assignments and grades</a></li>
  <li><a href="#the-art-of-war" id="toc-the-art-of-war" class="nav-link" data-scroll-target="#the-art-of-war">The art of war</a></li>
  <li><a href="#credits" id="toc-credits" class="nav-link" data-scroll-target="#credits">Credits</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Syllabus</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><img src="images/apotheosis.jpeg" class="img-fluid" style="width:100.0%"></p>
<div class="grid course-details course-details-smaller">
<section id="instructor" class="level3 g-col-12 g-col-sm-6 g-col-md-4">
<h3 data-anchor-id="instructor">Instructor</h3>
<ul>
<li><i class="fa-solid fa-user" aria-label="user"></i> &nbsp; <a href="https://www.juanftellez.com">Professor Juan Tellez</a></li>
<li><i class="fa-solid fa-university" aria-label="university"></i> &nbsp; 583 Kerr Hall</li>
<li><i class="fa-solid fa-envelope" aria-label="envelope"></i> &nbsp; jftellez@ucdavis.edu</li>
<li><i class="fa-solid fa-clock" aria-label="clock"></i> &nbsp; OH: W 9:45am-11:45am</li>
</ul>
</section>
<section id="teaching-assistants" class="level3 g-col-12 g-col-md-4 contact-policy">
<h3 data-anchor-id="teaching-assistants">Teaching assistants</h3>
<ul>
<li><i class="fa-solid fa-user-graduate" aria-label="user-graduate"></i> &nbsp; <strong>Forrest Owens</strong> <br> <i class="fa-solid fa-clock" aria-label="clock"></i> &nbsp; OH: Tu 9am-10am <br> <i class="fa-solid fa-university" aria-label="university"></i> &nbsp; Kerr 568 <br> <i class="fa-solid fa-envelope" aria-label="envelope"></i> &nbsp; flowens@ucdavis.edu</li>
<li><i class="fa-solid fa-user-graduate" aria-label="user-graduate"></i> &nbsp; <strong>Alexandra (Ally) Lazar</strong> <br> <i class="fa-solid fa-clock" aria-label="clock"></i> &nbsp; OH: Tu 2pm-3pm <br> <i class="fa-solid fa-university" aria-label="university"></i> &nbsp; Kerr 575 <br> <i class="fa-solid fa-envelope" aria-label="envelope"></i> &nbsp; ajlazar@ucdavis.edu</li>
<li><i class="fa-solid fa-user-graduate" aria-label="user-graduate"></i> &nbsp; <strong>Joseph Bonneau</strong> <br> <i class="fa-solid fa-clock" aria-label="clock"></i> &nbsp; OH: M 11am-1pm <br> <i class="fa-solid fa-university" aria-label="university"></i> &nbsp; Kerr 677 <br> <i class="fa-solid fa-envelope" aria-label="envelope"></i> &nbsp; jibonneau@ucdavis.edu</li>
</ul>
</section>
<section id="course-details" class="level3 g-col-12 g-col-sm-6 g-col-md-4">
<h3 data-anchor-id="course-details">Course details</h3>
<ul>
<li><i class="fa-solid fa-calendar" aria-label="calendar"></i> &nbsp; Mon/Wed</li>
<li><i class="fa-solid fa-calendar-alt" aria-label="calendar-alt"></i> &nbsp; 9/25–12/06</li>
<li><i class="fa-solid fa-clock" aria-label="clock"></i> &nbsp; 1:40PM - 3:00PM</li>
<li><i class="fa-solid fa-location-dot" aria-label="location-dot"></i> &nbsp; The Grove (Surge III) 1309</li>
</ul>
</section>
</div>
<section id="what-is-this-class-about" class="level2">
<h2 data-anchor-id="what-is-this-class-about">What is this class about?</h2>
<p>This is a course on the study of civil wars, political violence, and other forms of armed conflict. Each week is organized around a topic related to the study of political violence, including why civil wars break out, the tactics insurgents and states use during wars and other big questions in the literature.</p>
<p>In addition to reading, we will also spend a significant amount of time in this class <strong>working with data</strong> on political violence. We will explore general patterns and trends, think about how to measure different concepts related to political violence, and see to what extent different theories of political violence are supported by evidence.</p>
<p>By the end of this course, you will be able to:</p>
<ol type="1">
<li>Identify structural and historical drivers of violence</li>
<li>Think about civil war as a strategic process involving states, civilians, and armed groups</li>
<li>Explore, analyze, and interpret data bearing on political violence</li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Content warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Course content may include discussions and materials related to war, terrorism, genocide, torture, and other forms of violence. We will engage with scholarly texts, videos, images, and case studies that may contain graphic descriptions or sensitive content. These materials are necessary for a comprehensive understanding of the subject, but may be emotionally challenging.</p>
</div>
</div>
</section>
<section id="what-materials-do-i-need-for-this-course" class="level2">
<h2 data-anchor-id="what-materials-do-i-need-for-this-course">What materials do I need for this course?</h2>
<section id="where-do-i-find-the-readings" class="level3">
<h3 data-anchor-id="where-do-i-find-the-readings">Where do I find the readings?</h3>
<p>Book chapters and other non-easily accessible readings will be linked on this site. You will have to find journal articles and easily accessible readings on your own (a valuable skill!). Googling the article is often enough, otherwise Google Scholar and being either on campus wi-fi or on the library VPN should do the trick. If you’re stuck the TAs will be happy to help.</p>
</section>
<section id="what-do-i-need-for-the-data-assignments" class="level3">
<h3 data-anchor-id="what-do-i-need-for-the-data-assignments">What do I need for the data assignments?</h3>
<p>All homework requiring data will be done in Google Sheets or Excel. <a href="http://sheets.google.com/">Google Sheets</a> is free to use with a Google account, and I will do all data analysis tutorials in Google Sheets. However, you can easily follow along with whatever program you prefer.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The class assumes no prior experience working with data</p>
</div>
</div>
</section>
</section>
<section id="how-can-i-get-help-or-contact-the-instructors" class="level2">
<h2 data-anchor-id="how-can-i-get-help-or-contact-the-instructors">How can I get help or contact the instructors?</h2>
<p>For big questions – stuck on the homework, question about a grade, confusion/questions about the reading – the best thing is to come to our office hours. You will get <em>better</em> help from us during office hours than over email.</p>
<p>For small and/or urgent questions – my grade is missing, you believe there is an error in something we uploaded, etc. – the best thing is to email. In your emails, please:</p>
<ul>
<li>Be professional (include a subject line, a greeting, e.g., “Dear Prof.&nbsp;XYZ,”)</li>
<li>Be brief (I won’t be offended!)</li>
</ul>
</section>
<section id="frequently-answered-no-questions-fanq" class="level2">
<h2 data-anchor-id="frequently-answered-no-questions-fanq">Frequently Answered No Questions (FANQ)</h2>
<p>This is an important list of questions that students frequently ask where the answer is ‘no’.</p>
<p><img src="images/no-chile.png" class="img-fluid" style="width:30.0%"></p>
<ul>
<li><p><em>Do you record lecture?</em> I do not record lecture.</p></li>
<li><p><em>Can I record your lecture?</em> You may not record my lecture.</p></li>
<li><p><em>I had to miss class, do I need to let you know?</em> You do not need to let me know.</p></li>
<li><p><em>Can I have your lecture notes in addition to your slides?</em> You may not have any additional notes.</p></li>
<li><p><em>Will there be a study guide?</em> There will not be a study guide. Making one is a great study exercise!</p></li>
<li><p><em>Are there extra practice tests / practice questions?</em> There are no extra practice tests / questions.</p></li>
<li><p><em>Can I correct what I got wrong on the homework / test and resubmit for credit?</em> You may not resubmit homework / test for credit.</p></li>
<li><p><em>Can I take the exam earlier / later than scheduled?</em> You may not take exams earlier / later than scheduled.</p></li>
<li><p><em>It is week X, can I turn in a missing assignment from week X - N?</em> You may not turn in an assignment from previous weeks. See the <a href="">assignments</a> page for more details.</p></li>
<li><p><em>The homework was due Wednesday, but when I went to turn it in that evening, something happened that was out of my control and I couldn’t turn it in. Can I turn it in now without missing points?</em> You may not turn it in now without missing points. See the <a href="">assignments</a> page for more details.</p></li>
<li><p><em>Will there be extra credit?</em> There may be, but I will not pre-commit to extra credit opportunities.</p></li>
</ul>
</section>
<section id="counseling-psychiatry-services" class="level2">
<h2 data-anchor-id="counseling-psychiatry-services">Counseling &amp; Psychiatry Services</h2>
<p>Life at Davis can be complicated and challenging. You might feel overwhelmed, experience anxiety or depression, or struggle with relationships or family responsibilities. <a href="https://shcs.ucdavis.edu/services/counseling-services">UC Davis Counseling Services</a> provide <em>confidential</em> support for students who are struggling with mental health and emotional challenges. Please do not hesitate to contact them for assistance—getting help is a smart and good thing to do.</p>
</section>
<section id="assignments-and-grades" class="level2">
<h2 data-anchor-id="assignments-and-grades">Assignments and grades</h2>
<p>You can find descriptions for all the assignments on the <a href="">assignments page</a>.</p>
<table class="table">
<colgroup>
<col style="width: 26%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Assignment</th>
<th style="text-align: center;">Percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Problem sets (8)</td>
<td style="text-align: center;">50%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Midterm</td>
<td style="text-align: center;">25%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Final</td>
<td style="text-align: center;">25%</td>
</tr>
</tbody>
</table>
<p><br>
</p>
<table class="table">
<colgroup>
<col style="width: 11%">
<col style="width: 13%">
<col style="width: 11%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Grade</th>
<th style="text-align: center;">Range</th>
<th style="text-align: left;">Grade</th>
<th style="text-align: center;">Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: center;">93–100%</td>
<td style="text-align: left;">C</td>
<td style="text-align: center;">73–76%</td>
</tr>
<tr class="even">
<td style="text-align: left;">A−</td>
<td style="text-align: center;">90–92%</td>
<td style="text-align: left;">C−</td>
<td style="text-align: center;">70–72%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">B+</td>
<td style="text-align: center;">87–89%</td>
<td style="text-align: left;">D+</td>
<td style="text-align: center;">67–69%</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: center;">83–86%</td>
<td style="text-align: left;">D</td>
<td style="text-align: center;">63–66%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">B−</td>
<td style="text-align: center;">80–82%</td>
<td style="text-align: left;">D−</td>
<td style="text-align: center;">60–62%</td>
</tr>
<tr class="even">
<td style="text-align: left;">C+</td>
<td style="text-align: center;">77–79%</td>
<td style="text-align: left;">F</td>
<td style="text-align: center;">&lt; 60%</td>
</tr>
</tbody>
</table>
</section>
<section id="the-art-of-war" class="level2">
<h2 data-anchor-id="the-art-of-war">The art of war</h2>
<p>War is a common subject of art (like the painting up top). Look through some famous paintings of war. Draw a quick sketch of the painting of your choice on scratch paper, including your name and the name of the painting / art piece. Bring it to me in class. I’ll round your final grade up to the nearest whole number; you’ve got until the end of week 2 of class to do this.</p>
</section>
<section id="credits" class="level2">
<h2 data-anchor-id="credits">Credits</h2>
<p>This course draws on code, content, ideas and much more from work by Andrew Heiss, Kieran Healy, Laia Balcells, and others who have made their courses publicly available.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Content <i class="fa-solid fa-copyright" aria-label="copyright"></i> 2024 by <a href="https://www.juanftellez.com">Juan Tellez</a> <br></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a><br> <a href="https://github.com/hail2thief/civwar">View the source at <i class="fa-brands fa-github" aria-label="github"></i> GitHub</a></p>
</div>
  </div>
</footer>




</body></html>